---
title: "Matrix-Breakout-2-Morpheus"
date: 2024-08-26
categories: 
  - "vulnhub"
tags: 
  - "vulnhub"
---

## _å‰è¨€_

é¶æœºæ¥è‡ª[Vulnerable By Design ~ VulnHub](https://www.vulnhub.com/)

ä¸‹è½½é“¾æ¥ï¼šhttps://download.vulnhub.com/matrix-breakout/matrix-breakout-2-morpheus.ova

ç½‘ç»œè¿æ¥æ–¹å¼é‡‡ç”¨æ¡¥æ¥ï¼ˆç›´æ¥å¤åˆ¶ç‰©ç†æœºç½‘ç»œï¼‰ï¼Œä¾¿äºæ“ä½œã€‚

æ³¨æ„ï¼ï¼ï¼ï¼ï¼

æœ¬æ–‡å†…å®¹å¹¶éç¬¦åˆé¢„æœŸï¼Œè€Œæ˜¯åˆ©ç”¨äº†å†…æ ¸æ¼æ´ã€‚å› æ­¤è¯·ä¸è¦åœ¨æ„å†…å®¹ã€‚

## å­˜æ´»ä¸»æœºæ¢æµ‹

è™šæ‹Ÿæœºå¼€å¯åå¦‚å›¾æ‰€ç¤ºï¼Œéœ€è¦ç™»å½•ã€‚

![](./images/image-36.png)

```
#kali
nmap  -O 192.168.101.0/24
```

ä½¿ç”¨nmapå¯¹å±€åŸŸç½‘å­˜æ´»ä¸»æœºè¿›è¡Œæ‰«æï¼Œå‘ç°è¯¥æœºå™¨ä¸Š80ç«¯å£æ˜¯å¼€å¯çŠ¶æ€ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨è®¿é—®

![](./images/image-37.png)

![](./images/image-38.png)

```
æ¬¢è¿æ¥åˆ° Boot2Root CTFï¼ŒMorpheusï¼š1ã€‚
ä½ ç© Trinityï¼Œè¯•å›¾è°ƒæŸ¥ Cypher å°†å…¶ä»–äººéƒ½æ‹’ä¹‹é—¨å¤–çš„ Nebuchadnezzarï¼Œè‡³å°‘å¯¹äº ssh æ¥è¯´æ˜¯è¿™æ ·ã€‚

ç¥ä½ å¥½è¿ï¼ - @inguardians @jaybeale
```

æ¥ä¸‹æ¥æŸ¥çœ‹81ç«¯å£ï¼Œéœ€è¦èº«ä»½è®¤è¯ã€‚

![](./images/image-39.png)

ç®€å•çš„çˆ†ç ´ä¹‹åæ— æœï¼Œå°è¯•å¯»æ‰¾å…¶ä»–çš„è§£å†³æ–¹å¼ã€‚

## ç›®å½•æ‰«æ

ç”¨å¾¡å‰‘å·¥å…·æ‰«æä¹‹åï¼Œæ‰«ä¸å‡ºä¸œè¥¿æ¥ã€‚ä¸è¿‡kaliè‡ªå¸¦çš„å­—å…¸ä¹Ÿå¯ä»¥ç”¨ã€‚

```
#kali
gobuster dir -u http://192.168.101.40 -x php,jsp,txt,asp -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt 

#å¦‚æœæ²¡æœ‰gobuster ï¼Œå¯ä»¥ä½¿ç”¨apt install gobuster
```

![](./images/image-40.png)

è®¿é—®graffiti.phpï¼Œå‡ºç°å¯ä»¥äº¤äº’çš„åœ°æ–¹ã€‚

![](./images/image-41.png)

## è¿›è¡Œæ”»å‡»

![](./images/image-42.png)

æµ‹è¯•ä¹‹åï¼Œä»»æ„å­—ç¬¦ä¸²åœ¨æäº¤ä¹‹åä¼šä¿å­˜åœ¨å½“å‰é¡µé¢ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªå­˜å‚¨å‹çš„XSSæ¼æ´ã€‚

å¹¶ä¸”æŠ“åŒ…ä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œä¿¡æ¯å’Œå¯¼å…¥æ–‡ä»¶åéƒ½æ˜¯å¯æ§çš„ã€‚

![](./images/image-43.png)

é‚£ä¹ˆå°±å°è¯•å†™å…¥ä¸€å¥è¯æœ¨é©¬ï¼Œå¹¶ä¸”å¯¼å…¥åˆ°ä¸€ä¸ªphpæ–‡ä»¶ä¸­ã€‚

![](./images/image-44.png)

ç”¨èšå‰‘é“¾æ¥æˆåŠŸï¼Œå¹¶ä¸”å‘ç°ä¸€ä¸ªæç¤ºï¼Œåœ¨å½“å‰ç›®å½•ä¸‹å­˜åœ¨ä¸€ä¸ªéšè—çš„pngå›¾ç‰‡ã€‚

![](./images/image-45.png)

```
#kali
wget http://192.168.101.40/.cypher-neo.png
```

ä¸‹è½½åˆ°kalié‡Œé¢ï¼Œå°è¯•ä½¿ç”¨binwalkæˆ–è€…foremost

```
#kali
binwalk -e .cypher-neo.png --run-as=root
```

![](./images/image-46.png)

æˆåŠŸåˆ†ç¦»å‡ºä¸œè¥¿ã€‚ç»è¿‡HXDæŸ¥çœ‹ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆæœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚

è¿™é‡Œäº†è§£åˆ°ä¸€ä¸ªå¯ä»¥è¿›è¡Œææƒçš„è„šæœ¬ï¼š**Linpeas**

```
wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh
```

![](./images/image-47.png)

åœ¨kaliä¸Šå¼€ç«¯å£ï¼Œç„¶ååœ¨é¶æœºä¸Šå°†å…¶ä¸‹è½½è¿‡æ¥ã€‚

```
chmod +x linpeas.sh
./linpeas.sh
```

![](./images/image-48.png)

è¿™é‡Œæ‰§è¡Œå®Œåï¼Œå¹¶ä¸ä¼šå‡ºç°ä»»ä½•ä¸œè¥¿ã€‚wpè¯´çš„è¦åå¼¹shellä¹‹åæ‰èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚

è¿›å…¥ç½‘ç«™ï¼š[åå¼¹shellå‘½ä»¤åœ¨çº¿ç”Ÿæˆå™¨|ğŸ”°é›¨è‹ğŸ”° (ddosi.org)](https://www.ddosi.org/shell/)

![](./images/image-49.png)

å›åˆ°ä¹‹å‰é‚£ä¸ªå¯ä»¥ä¸Šä¼ æœ¨é©¬çš„åœ°æ–¹ï¼ŒæŠŠè¿™ä¸ªæœ¨é©¬ä¸Šä¼ ä¹‹åï¼Œå†è®¿é—®ã€‚åŒæ—¶kaliç«¯è¦ncç›‘å¬100ç«¯å£

![](./images/image-50.png)

kaliæˆåŠŸè·å¾—shellã€‚

![](./images/image-51.png)

è¿™é‡Œæšä¸¾å‡ºæ¥è®¸å¤šæ¼æ´ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯2022-0847è„ç®¡é“æ¼æ´ã€‚

ç›¸å…³é“¾æ¥ï¼š[CVE-2022-0847 Linux è„ç®¡æ¼æ´åˆ†æä¸åˆ©ç”¨ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·](https://www.freebuf.com/vuls/331378.html)

æ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¯¥æ¼æ´å®ç°ä½æƒé™ç”¨æˆ·æå‡è‡³ root æƒé™ã€‚

![](./images/image-52.png)

æŠŠpocè¿›è¡Œgit clone ä¸‹æ¥ï¼Œå†ä¼ ç»™é¶æœºæ‰§è¡Œã€‚

![](./images/image-53.png)

```
chmod +x Dirty-Pipe.sh
bash Dirty-Pipe.sh
```

å¯ä»¥çœ‹åˆ°æƒé™å·²ç»æå‡åˆ°äº†root

![](./images/image-54.png)

![](./images/image-55.png)

è‡³æ­¤ç»“æŸ
